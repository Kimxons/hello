<html>

<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Track Product</title>

<link href="https://fonts.googleapis.com/css?family=Noto+Sans&display=swap" rel="stylesheet">
<link href="static/css/styles1.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
<script src="static/js/web3.min.js"></script>

<style type="text/css/styles.css"></style>
<script type="text/javascript">
	if (typeof web3 !== "undefined") {
	web3 = new Web3(web3.currentProvider);
}else {
	web3 = new Web3(new Web3.providers.HttpProvider("http://127.0.0.1:8545"));
}

var contract_instance;
contract_instance = web3.eth.contract(contract_abi).at(contract_address);
console.log(contract_instance); 
    
function getPresentStatus(){
    var OrderId = document.getElementById("OrderId").value;
    console.log(OrderId);
    contract_instance.getPresentStatus( OrderId, {from: web3.eth.accounts[0]}, function (error, result) {
   
        console.log(result);
        if (error) {
            console.log("sd");
            console.error(error);
        }else{
        	console.log("hello");
	        document.getElementById("Seller").innerText = result[0];
	        document.getElementById("Buyer").innerText=result[1].c[0];
	        document.getElementById("paymentDate").innerText=result[2].c[0];
	        document.getElementById("orderDetails").innerText = result[3];
	        document.getElementById("orderAmount").innerText = result[4];
	        document.getElementById("deliveryDate").innerText = result[5].c[0];
        } 
    }

    )
}

</script>

</head>

<body>
  <div class="update">
	<h2 style="text-align: center;">Track an Order</h2>
	<a href="/buyer" class="btn btn-danger">Back to Home</a>
    <div class="content">
      <input id="OrderId" type=text size=16  placeholder="Enter Order ID" class=item-id><br><br>
      <button type='button' class="btn btn-success "  data-toggle="modal" data-target="#trackModal" onclick="getPresentStatus()">SUBMIT</button>
	</div>

	<div class="modal fade" id="trackModal" tabindex="-1" role="dialog" aria-labelledby="tenderModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
	  <div class="modal-content">
		<div class="modal-header">
		  <h5 class="modal-title" id="exampleModalLabel">INPUT DETAILS</h5>
		  
		  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			<span aria-hidden="true">&times;</span>
		  </button>
		</div>
		<div class="modal-body">
			<table>
				<tr>
				  <td><span class="track-span"><b>Current Owner</b> </span></td>
				  <td><span id="Holder"></span></td>
				</tr>

				<tr>
				  <td><span  class="track-span"><b>Buyer</b> </span></td>
				  <td><span id="Buyer"></span></td>
				</tr>

				<tr>
				  <td><span class="track-span"><b>paymentDate</b></span></td>
					<td><span id="paymentDate"></span></td>
				</tr>

				<tr>
				  <td> <span class="track-span"><b>orderDetails</b> </span></td>
					<td><span id="orderDetails"></span></td>
				</tr>
				<tr>
				  <td><span class="track-span"><b>OrderAmount</b></span></td>
					<td><span id="orderAmount"></span></td>
				</tr>
				<tr>
					<td><span class="track-span"><b>deliveryDate</b></span></td>
						<td><span id="deliveryDate"></span></td>
				</tr>

		  </table>
				
		</div>
	  </div>
	</div>
  </div>
  </div>
  
  </div>
</body>

<style>
		table {
		  font-family: arial, sans-serif;
		  border-collapse: collapse;
		  width: 50%;
		  margin-left: -15px;
		}
		
		td, th {
		  border: 1px solid #dddddd;
		  text-align: left;
		  padding: 8px;
		}
		
		tr:nth-child(even) {
		  background-color: #dddddd;
		}
		</style>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
  integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
  integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
  integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script src="static/js/custom/index.js"></script>
<script src="static/js/jquery.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>

</html>